{% extends 'layout.html.twig' %}
{% block stylesheet %}
	<link rel="stylesheet" href="/assets/css/cart.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
{% endblock %}

{% block content%}
<div class="home">
        <section id="sectionone" class="screen">
            <div id="scene">
                <div data-depth="0.1" class="bg">
                    <img src="/assets/images/background.png" alt=""/>
                </div>
                <div data-depth="0.2" class="rock1">
                    <img src="/assets/images/rock.png" alt=""/>
                </div>
                <div data-depth="1.2" class="earth">
                    <img src="/assets/images/earth.png" alt=""/>
                </div>
                <div data-depth="0.1" class="text">
                    <h1 class='contact'>PANIER</h1>
                </div>
                <div data-depth="0.4" class="mid">
                    <img src="/assets/images/mid.png" alt=""/>
                </div>
                <div data-depth="0.1" class="fore">
                    <img src="/assets/images/foreground.png" alt=""/>
                </div>
            </div>
        </section>

        <section id="sectiontwo" class="screen">
        {% block javascript %}
            <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/parallax/3.1.0/parallax.min.js"></script>
            <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
            <script src="/assets/js/index.js" type="text/javascript"></script>
        {% endblock %}


	<section class="cart">
		<div class="container">
			{% if products is not empty %}
				<div class="table">
					<table class="table">
						<thead>
							<tr>
								<th>Menu</th>
								<th>Quantité</th>
								<th>Prix</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							{% set total = 0 %}
                            
							{% for product in products %}
								{% set total = total + product.price * product.quantity %}
								<tr>
                                <td>
                                <h2>{{ product.name }}</h2>						
								</td>	<!-- Bouton -->
									<td>
										<div class="d-flex justify-content-between">
											<a class="quantity btn btn-primary border-0" href="/Cart/substract/{{product.id}}">-</a>
											<p>{{ product.quantity }}</p>
											<a class="quantity btn btn-primary border-0" href="/Cart/add/{{product.id}}">+</a>
										</div>
									</td>
                                   
									<td>{{ product.quantity * product.price }}€</td>
                                    
									<td>
										<a class="btn btn-primary border-0" href="/Cart/delete/{{product.id}}">X</a>
									</td>
								</tr>
							{% endfor %}

							<tr>
								<th>Prix total</th>
								<td></td>
								<td></td>
								<td></td>
								<td>{{total}}€</td>
								<td></td>
							</tr>

						</tbody>
						<a class="btn btn-primary border-0" href="/Cart/empty">Vider le panier</a>
					</table>
					<div class="text-center">
						<a class="btn btn-primary text-center border-0" href="/Delivery/index">Commander</a>
					</div>
				</div>
			{% else %}
				<div class="alert alert-warning">
					<p>Panier vide</p>
				</div>
			{% endif %}
		</div>
	</div>
	</section>
</section>
	{% block javascript %}
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/parallax/3.1.0/parallax.min.js"></script>
        <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
        <script src="/assets/js/index.js" type="text/javascript"></script>
    {% endblock %}
{% endblock %}
